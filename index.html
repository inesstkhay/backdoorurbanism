<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Carte thèse</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css">
        
</head>
<body>

<div id="navbar" class="navbar">
  <button class="tab-btn active" data-view="map">Carte</button>
  <button class="tab-btn" data-view="proxemic">Patterns</button>
  <button class="tab-btn" data-view="gallery">Galerie des patterns</button>
  <!--<button class="tab-btn" data-view="critical">Acteurs et discours</button> désactivé pour l'instant! -->
</div>

<!-- VUES PRINCIPALES -->
<div id="map"></div>
<div id="proxemic-view"></div>
<div id="gallery-view" style=" display: none; position: absolute; top: 0; left: 250px; /* pour ne pas passer sous les filtres */ right: 0; bottom: 0; background: white; overflow-y: auto; z-index: 100;     padding: 80px;     box-sizing: border-box; "></div>
<div id="similarity-controls" style="display:none; position: absolute; top: 40px; left: 50%; color: white; transform: translateX(-50%); background: rgb(0, 0, 0); padding: 10px; z-index: 1050; border: 1px solid #ccc;">
    <label for="similarity-slider">Nombre de critères communs : <span id="slider-value">5</span></label><br>
    <input type="range" id="similarity-slider" min="2" max="15" value="5" step="1"> </div>
<div id="critical-view" style=" display: none; position: absolute;     top: 60px;     left: 50%;     transform: translateX(-50%);     width: 600px;    height: 600px;    background: white;    z-index: 100;    padding: 0;    box-sizing: border-box;     overflow: hidden;"> </div>

<!-- PANNELS LATÉRAUX -->
<div id="spatial-sidebar" class="sidebar">
    <button class="close-btn" onclick="closeSidebars()">X</button>
    <h2 id="spatial-name"></h2>
    <p><strong>ID :</strong> <span id="spatial-id"></span></p>
    <p id="spatial-description"></p>
    <div id="spatial-photos"></div>
</div>


<div id="discourse-sidebar" class="sidebar">
    <button class="close-btn" onclick="closeSidebars()">X</button>
    <h2 id="discourse-name"></h2>
    <p><strong>Auteur :</strong> <span id="discourse-author"></span></p>
    <p><strong>Date :</strong> <span id="discourse-date"></span></p>
    <p><strong>Source :</strong> <span id="discourse-source"></span></p>
    <p id="discourse-text"></p>
</div>

<!-- CONTRÔLES -->

<div id="filters">
    <strong>Zones</strong><br>
<label><input type="checkbox" class="filter-zone" value="montreuil" checked> Montreuil</label><br>
<label><input type="checkbox" class="filter-zone" value="mirail" checked> Mirail</label><br>
   </div>

   <!-- LEGENDE -->

   <div id="criteria-legend" style="position: absolute;  display: none; bottom: 60px; left: 10px; width: 320px; background: white; border: 1px solid #ccc; padding: 10px; font-size: 12px; z-index: 1050; overflow-y: auto; max-height: 50vh;">
    <strong>Légende des critères</strong><br><br>
    <em>Espace perçu (usage)</em><br>
    - Fréquence d’usage : ponctuel, régulier, quotidien<br>
    - Mode d’usage : prévu, détourné, créatif<br>
    - Intensité d’usage : faible, moyenne, forte, saturée<br><br>

    <em>Espace conçu</em><br>
    - Échelle : micro, méso, macro<br>
    - Origine de la forme : institutionnelle, singulière, collective<br>
    - Accessibilité : libre, semi-ouverte, fermée<br>
    - Visibilité : caché, visible, exposé<br><br>

    <em>Espace vécu (expérience)</em><br>
    - Acteurs visibles : habitant·e, institution, collectif, invisible<br>
    - Rapport affectif / symbolique
</div>

<button id="toggle-legend-btn" style="
    position: absolute;
    bottom: 20px;
    left: 10px;
    z-index: 1050;
    background-color: #000;
    color: white;
    padding: 10px;
    border: 1px solid white;
    cursor: pointer;
    font-family: 'Consolas', monospace;
">Légende</button>


<button id="toggle-location-btn" class="view-toggle-btn" onclick="toggleLocation()">Voir Toulouse</button>

<div id="footer">
    <span>Expérimentation</span>
    <button id="info-btn">i</button>
</div>

<div id="about">
    <h2>À propos</h2>
    <p>Description.</p>
    <p>Developpé par Iness Tkhayyare, LRA ENSA Toulouse</p>
    <button id="close-about">X</button>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="script.js"></script>
</body>
</html>
